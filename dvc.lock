schema: '2.0'
stages:
  data_loader:
    cmd: python -m src.main --stage data_loader
    deps:
    - path: data/clean/steel_energy_cleaned_V2.csv
      hash: md5
      md5: 3c90e04e716f464f74335febcb79a6b9
      size: 5738756
    - path: src/data/data_loader.py
      hash: md5
      md5: 53c324096d96894a2459eb7dcf250cc2
      size: 3240
    outs:
    - path: data/processed/steel_energy_processed.csv
      hash: md5
      md5: 20d922c8c5d37fbae386e4943dff8af6
      size: 2563941
  feature_engineering:
    cmd: python -m src.main --stage feature_engineering
    deps:
    - path: data/processed/steel_energy_processed.csv
      hash: md5
      md5: 20d922c8c5d37fbae386e4943dff8af6
      size: 2563941
    - path: src/data/feature_engineer.py
      hash: md5
      md5: 0354113c903d32c20abd7ef8b42fced2
      size: 10854
    outs:
    - path: data/interim/features.csv
      hash: md5
      md5: 44e687e98efdda7ac61c667cfca15253
      size: 1676057
  train_xgboost:
    cmd: python -m src.main --stage train_xgboost
    deps:
    - path: data/interim/features.csv
      hash: md5
      md5: 44e687e98efdda7ac61c667cfca15253
      size: 1676057
    - path: src/models/xgboost_model/model_trainer.py
      hash: md5
      md5: 7b8deb59320886da1a0398eb2a80a4e8
      size: 2768
    params:
      params.yaml:
        train.colsample_bytree: 0.8
        train.cv_folds: 5
        train.eval_metric: rmse
        train.learning_rate: 0.1
        train.max_depth: 6
        train.n_estimators: 200
        train.random_state: 42
        train.subsample: 0.8
    outs:
    - path: models/xgboost_model/artifacts/model.json
      hash: md5
      md5: c4aa85a144a9fad410ccf2b4e7ab41d6
      size: 1210109
  train:
    cmd: python -m src.main --stage train
    deps:
    - path: data/interim/features.csv
      hash: md5
      md5: 44e687e98efdda7ac61c667cfca15253
      size: 1676057
    - path: src/models/linear_regression_model/model_trainer.py
      hash: md5
      md5: 1fc8fb9bb3fff17f7d87b86e37c3ad90
      size: 13561
    - path: src/models/random_forest_model/model_trainer.py
      hash: md5
      md5: b327d6103d2b54b950ac1fcfb3cd223f
      size: 13960
    - path: src/models/xgboost_model/model_trainer.py
      hash: md5
      md5: 33cc5ebf595622bfab5703ac921a1101
      size: 12864
    params:
      params.yaml:
        train.cv_folds: 5
        train.linear_regression:
          fit_intercept: true
          n_jobs:
        train.model_type: xgboost
        train.random_forest:
          max_depth:
          max_features:
          min_samples_leaf: 1
          min_samples_split: 2
          n_estimators: 300
          n_jobs: -1
          random_state: 42
        train.xgboost:
          colsample_bytree: 0.8
          eval_metric: rmse
          learning_rate: 0.1
          max_depth: 6
          n_estimators: 200
          n_jobs: -1
          random_state: 42
          subsample: 0.8
    outs:
    - path: models/xgboost/artifacts
      hash: md5
      md5: 34f69ae49423e923a52d5cfc6da1a8e0.dir
      size: 854308
      nfiles: 1
  train_suite:
    cmd: python -m src.pipelines.experiment_pipelines --params params.yaml
    deps:
    - path: data/interim/features.csv
      hash: md5
      md5: 59e7937ef99320a36d6301bb610ade34
      size: 1664034
    - path: params.yaml
      hash: md5
      md5: aafdb8aac7d72923172ee05acc894651
      size: 1017
    - path: src/pipelines/data_setup.py
      hash: md5
      md5: 7a39bfdda143a400d1a40b2f0ae446a7
      size: 4352
    - path: src/pipelines/experiment_pipelines.py
      hash: md5
      md5: 24a5199d7f7bbd7054b2b6b2228de4f6
      size: 10812
    - path: src/utils/env.py
      hash: md5
      md5: 3179cc82a2bed08aea2eb042dccb7479
      size: 920
    params:
      params.yaml:
        mlflow.model_name: steel-energy/suite
        mlflow.register_model: false
        train.cv_folds: 5
        train.linear_regression:
          fit_intercept: true
          n_jobs:
        train.model_type: xgboost
        train.model_types:
        - random_forest
        - linear_regression
        - xgboost
        train.random_forest:
          max_depth:
          max_features:
          min_samples_leaf: 1
          min_samples_split: 2
          n_estimators: 300
          n_jobs: -1
          random_state: 42
        train.xgboost:
          colsample_bytree: 0.8
          eval_metric: rmse
          learning_rate: 0.1
          max_depth: 6
          n_estimators: 200
          n_jobs: -1
          random_state: 42
          subsample: 0.8
    outs:
    - path: reports/metrics_linear.json
      hash: md5
      md5: ebc0b169069d8bd6c3045b8adf5c6707
      size: 129
    - path: reports/metrics_rf.json
      hash: md5
      md5: 2751b30a1d9739678f91c52b0297b2a7
      size: 130
    - path: reports/metrics_xgb.json
      hash: md5
      md5: 29e0dde768e992616b0f410e96244ca5
      size: 130
